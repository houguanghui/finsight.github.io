import{R as x,g as he,e as C,Q as fe,h as K,X as ge,i as de,Z as Re}from"./shadow-Dste9fMo.js";import{u as Ne,o as pe}from"./omit-_PpgVY5T.js";import{R as d,a as m}from"./chunk-PVWAREVJ-CaeOwHG_.js";function be(e){return!!(e.addonBefore||e.addonAfter)}function _e(e){return!!(e.prefix||e.suffix||e.allowClear)}function ve(e,t,u){var r=t.cloneNode(!0),o=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=u,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},o}function me(e,t,u,r){if(u){var o=t;if(t.type==="click"){o=ve(t,e,""),u(o);return}if(e.type!=="file"&&r!==void 0){o=ve(t,e,r),u(o);return}u(o)}}function Fe(e,t){if(e){e.focus(t);var u=t||{},r=u.cursor;if(r){var o=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(o,o);break;default:e.setSelectionRange(0,o)}}}}var Ae=d.forwardRef(function(e,t){var u,r,o,b=e.inputElement,_=e.children,h=e.prefixCls,D=e.prefix,F=e.suffix,S=e.addonBefore,A=e.addonAfter,re=e.className,le=e.style,M=e.disabled,L=e.readOnly,ue=e.focused,P=e.triggerFocus,g=e.allowClear,T=e.value,$=e.handleReset,w=e.hidden,s=e.classes,a=e.classNames,I=e.dataAttrs,y=e.styles,f=e.components,O=e.onClear,Y=_??b,G=(f==null?void 0:f.affixWrapper)||"span",H=(f==null?void 0:f.groupWrapper)||"span",R=(f==null?void 0:f.wrapper)||"span",i=(f==null?void 0:f.groupAddon)||"span",U=m.useRef(null),Q=function(k){var q;(q=U.current)!==null&&q!==void 0&&q.contains(k.target)&&(P==null||P())},ee=_e(e),E=m.cloneElement(Y,{value:T,className:x((u=Y.props)===null||u===void 0?void 0:u.className,!ee&&(a==null?void 0:a.variant))||null}),W=m.useRef(null);if(d.useImperativeHandle(t,function(){return{nativeElement:W.current||U.current}}),ee){var V=null;if(g){var X=!M&&!L&&T,Z="".concat(h,"-clear-icon"),ne=he(g)==="object"&&g!==null&&g!==void 0&&g.clearIcon?g.clearIcon:"âœ–";V=d.createElement("button",{type:"button",tabIndex:-1,onClick:function(k){$==null||$(k),O==null||O()},onMouseDown:function(k){return k.preventDefault()},className:x(Z,C(C({},"".concat(Z,"-hidden"),!X),"".concat(Z,"-has-suffix"),!!F))},ne)}var N="".concat(h,"-affix-wrapper"),ie=x(N,C(C(C(C(C({},"".concat(h,"-disabled"),M),"".concat(N,"-disabled"),M),"".concat(N,"-focused"),ue),"".concat(N,"-readonly"),L),"".concat(N,"-input-with-clear-btn"),F&&g&&T),s==null?void 0:s.affixWrapper,a==null?void 0:a.affixWrapper,a==null?void 0:a.variant),v=(F||g)&&d.createElement("span",{className:x("".concat(h,"-suffix"),a==null?void 0:a.suffix),style:y==null?void 0:y.suffix},V,F);E=d.createElement(G,fe({className:ie,style:y==null?void 0:y.affixWrapper,onClick:Q},I==null?void 0:I.affixWrapper,{ref:U}),D&&d.createElement("span",{className:x("".concat(h,"-prefix"),a==null?void 0:a.prefix),style:y==null?void 0:y.prefix},D),E,v)}if(be(e)){var p="".concat(h,"-group"),j="".concat(p,"-addon"),te="".concat(p,"-wrapper"),ae=x("".concat(h,"-wrapper"),p,s==null?void 0:s.wrapper,a==null?void 0:a.wrapper),se=x(te,C({},"".concat(te,"-disabled"),M),s==null?void 0:s.group,a==null?void 0:a.groupWrapper);E=d.createElement(H,{className:se,ref:W},d.createElement(R,{className:ae},S&&d.createElement(i,{className:j},S),E,A&&d.createElement(i,{className:j},A)))}return d.cloneElement(E,{className:x((r=E.props)===null||r===void 0?void 0:r.className,re)||null,style:K(K({},(o=E.props)===null||o===void 0?void 0:o.style),le),hidden:w})}),Ie=["show"];function ke(e,t){return m.useMemo(function(){var u={};t&&(u.show=he(t)==="object"&&t.formatter?t.formatter:!!t),u=K(K({},u),e);var r=u,o=r.show,b=ge(r,Ie);return K(K({},b),{},{show:!!o,showFormatter:typeof o=="function"?o:void 0,strategy:b.strategy||function(_){return _.length}})},[e,t])}var Be=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Le=m.forwardRef(function(e,t){var u=e.autoComplete,r=e.onChange,o=e.onFocus,b=e.onBlur,_=e.onPressEnter,h=e.onKeyDown,D=e.onKeyUp,F=e.prefixCls,S=F===void 0?"rc-input":F,A=e.disabled,re=e.htmlSize,le=e.className,M=e.maxLength,L=e.suffix,ue=e.showCount,P=e.count,g=e.type,T=g===void 0?"text":g,$=e.classes,w=e.classNames,s=e.styles,a=e.onCompositionStart,I=e.onCompositionEnd,y=ge(e,Be),f=m.useState(!1),O=de(f,2),Y=O[0],G=O[1],H=m.useRef(!1),R=m.useRef(!1),i=m.useRef(null),U=m.useRef(null),Q=function(n){i.current&&Fe(i.current,n)},ee=Ne(e.defaultValue,{value:e.value}),E=de(ee,2),W=E[0],V=E[1],X=W==null?"":String(W),Z=m.useState(null),ne=de(Z,2),N=ne[0],ie=ne[1],v=ke(P,ue),p=v.max||M,j=v.strategy(X),te=!!p&&j>p;m.useImperativeHandle(t,function(){var l;return{focus:Q,blur:function(){var c;(c=i.current)===null||c===void 0||c.blur()},setSelectionRange:function(c,J,z){var B;(B=i.current)===null||B===void 0||B.setSelectionRange(c,J,z)},select:function(){var c;(c=i.current)===null||c===void 0||c.select()},input:i.current,nativeElement:((l=U.current)===null||l===void 0?void 0:l.nativeElement)||i.current}}),m.useEffect(function(){R.current&&(R.current=!1),G(function(l){return l&&A?!1:l})},[A]);var ae=function(n,c,J){var z=c;if(!H.current&&v.exceedFormatter&&v.max&&v.strategy(c)>v.max){if(z=v.exceedFormatter(c,{max:v.max}),c!==z){var B,ce;ie([((B=i.current)===null||B===void 0?void 0:B.selectionStart)||0,((ce=i.current)===null||ce===void 0?void 0:ce.selectionEnd)||0])}}else if(J.source==="compositionEnd")return;V(z),i.current&&me(i.current,n,r,z)};m.useEffect(function(){if(N){var l;(l=i.current)===null||l===void 0||l.setSelectionRange.apply(l,Re(N))}},[N]);var se=function(n){ae(n,n.target.value,{source:"change"})},oe=function(n){H.current=!1,ae(n,n.currentTarget.value,{source:"compositionEnd"}),I==null||I(n)},k=function(n){_&&n.key==="Enter"&&!R.current&&(R.current=!0,_(n)),h==null||h(n)},q=function(n){n.key==="Enter"&&(R.current=!1),D==null||D(n)},ye=function(n){G(!0),o==null||o(n)},xe=function(n){R.current&&(R.current=!1),G(!1),b==null||b(n)},Ee=function(n){V(""),Q(),i.current&&me(i.current,n,r)},Ce=te&&"".concat(S,"-out-of-range"),Se=function(){var n=pe(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return d.createElement("input",fe({autoComplete:u},n,{onChange:se,onFocus:ye,onBlur:xe,onKeyDown:k,onKeyUp:q,className:x(S,C({},"".concat(S,"-disabled"),A),w==null?void 0:w.input),style:s==null?void 0:s.input,ref:i,size:re,type:T,onCompositionStart:function(J){H.current=!0,a==null||a(J)},onCompositionEnd:oe}))},we=function(){var n=Number(p)>0;if(L||v.show){var c=v.showFormatter?v.showFormatter({value:X,count:j,maxLength:p}):"".concat(j).concat(n?" / ".concat(p):"");return d.createElement(d.Fragment,null,v.show&&d.createElement("span",{className:x("".concat(S,"-show-count-suffix"),C({},"".concat(S,"-show-count-has-suffix"),!!L),w==null?void 0:w.count),style:K({},s==null?void 0:s.count)},c),L)}return null};return d.createElement(Ae,fe({},y,{prefixCls:S,className:x(le,Ce),handleReset:Ee,value:X,focused:Y,triggerFocus:Q,suffix:we(),disabled:A,classes:$,classNames:w,styles:s,ref:U}),Se())});export{Ae as B,Le as I,me as r,Fe as t,ke as u};
