import{w as R,a as o,t as s}from"./chunk-PVWAREVJ-CaeOwHG_.js";import{h as $,D as k}from"./request-CjBmveHj.js";import{c as f,f as h,S as w,R as g,C as n}from"./index-kAgd77-w.js";import{A as L}from"./index-Bs4fN4oH.js";import{C as l}from"./index-DFyzaV81.js";import{S as p,L as P}from"./index-CQDSfuxM.js";import{P as Y}from"./index-DPP3BEpb.js";import{F as B}from"./Table-4OPVbUbL.js";import{T as u}from"./index-DunuK-Wf.js";import{a as M}from"./index-CVy4ob4l.js";import"./createForOfIteratorHelper-S2aNMrNp.js";import"./shadow-Dste9fMo.js";import"./omit-_PpgVY5T.js";import"./index-IEvJvc0V.js";import"./index-C6kagqnf.js";import"./button-DY33ZuDq.js";import"./callSuper-YXcpR1nQ.js";import"./Tree-CIH8SUTX.js";import"./Pagination-BgtA34Dv.js";import"./index-B4RzsnZD.js";import"./index-_fd0fOh9.js";import"./index-DsuPZzx1.js";import"./index-jC90AlnQ.js";import"./Input-Baj7Qhn8.js";import"./Input-Bp_RZhWN.js";import"./AntdIcon-Dmy0igr9.js";const I="/api/balance-sheet",N={getBalanceSheetByDateRange:async(a,r,d)=>await $.get(`${I}/secucode/${a}/date-range`,{startDate:r,endDate:d})},{Option:T}=f,{RangePicker:E}=k,z=()=>{const[a,r]=o.useState(!1),[d,x]=o.useState([]),[c,y]=o.useState("600519.SH"),[m,b]=o.useState([h().subtract(15,"month"),h()]),[e,j]=o.useState(null),v=[{value:"600519.SH",label:"贵州茅台"},{value:"000858.SZ",label:"五粮液"},{value:"600036.SH",label:"招商银行"},{value:"601318.SH",label:"中国平安"}],A=async()=>{r(!0);try{const[t]=await Promise.all([N.getBalanceSheetByDateRange(c,m[0].format("YYYY-MM-DD"),m[1].format("YYYY-MM-DD"))]),i=(t==null?void 0:t.content)||[];x(i),j(i&&i[i.length-1]||null)}catch(t){console.error("获取资产负债表数据失败:",t)}finally{r(!1)}};o.useEffect(()=>{A()},[c,m]);const S={data:e?[{type:"货币资金",value:e.monetaryfunds||0},{type:"存货",value:e.inventory||0},{type:"固定资产",value:e.fixedAsset||0},{type:"无形资产",value:e.intangibleAsset||0},{type:"其他资产",value:(e.totalAssets||0)-((e.monetaryfunds||0)+(e.inventory||0)+(e.fixedAsset||0)+(e.intangibleAsset||0))}].filter(t=>t.value>0):[],angleField:"value",colorField:"type",radius:.8,labels:[{text:({value:t})=>`${(t/1e8).toFixed(1)}亿`,style:{fontSize:11,fill:"#666",dy:0}}],tooltip:{title:"资产构成",items:[{field:"type",name:"资产类型"},{field:"value",name:"金额",channel:"angle",valueFormatter:t=>`${(t/1e8).toFixed(2)}亿`},{field:"value",name:"占比",channel:"angle",valueFormatter:t=>`${(t/(((e==null?void 0:e.monetaryfunds)||0)+((e==null?void 0:e.inventory)||0)+((e==null?void 0:e.fixedAsset)||0)+((e==null?void 0:e.intangibleAsset)||0)+(((e==null?void 0:e.totalAssets)||0)-(((e==null?void 0:e.monetaryfunds)||0)+((e==null?void 0:e.inventory)||0)+((e==null?void 0:e.fixedAsset)||0)+((e==null?void 0:e.intangibleAsset)||0))))*100).toFixed(1)}%`}]},legend:{position:"bottom",itemName:{style:{fontSize:12}}},interactions:[{type:"element-active"}],height:300,autoFit:!0},F={data:d.map(t=>({reportDate:t.reportDate,debtRatio:t.totalAssets?t.totalLiabilities/t.totalAssets*100:0,securityNameAbbr:t.securityNameAbbr})),xField:"reportDate",yField:"debtRatio",xAxis:{type:"time",label:{formatter:t=>{const i=new Date(t);return`${i.getFullYear()}Q${Math.floor(i.getMonth()/3)+1}`}}},yAxis:{label:{formatter:t=>`${t.toFixed(1)}%`}},smooth:!0,height:300},C=[{title:"报告期",dataIndex:"reportDate",key:"reportDate",render:t=>{const i=new Date(t);return`${i.getFullYear()}年${i.getMonth()+1}月${i.getDate()}日`}},{title:"报表类型",dataIndex:"reportType",key:"reportType",render:t=>s.jsx(u,{color:"blue",children:t})},{title:"总资产(亿)",dataIndex:"totalAssets",key:"totalAssets",render:t=>(t/1e8).toFixed(2),align:"right"},{title:"总负债(亿)",dataIndex:"totalLiabilities",key:"totalLiabilities",render:t=>(t/1e8).toFixed(2),align:"right"},{title:"资产负债率",key:"debtRatio",render:(t,i)=>i.totalAssets?s.jsxs(u,{color:i.totalLiabilities/i.totalAssets>.7?"red":"green",children:[(i.totalLiabilities/i.totalAssets*100).toFixed(2),"%"]}):"-",align:"center"}];return s.jsxs(M,{header:{title:"资产负债表分析"},extra:[s.jsx(f,{value:c,onChange:y,style:{width:200,marginRight:16},loading:a,children:v.map(t=>s.jsx(T,{value:t.value,children:t.label},t.value))},"stock"),s.jsx(E,{onChange:t=>b(t),picker:"quarter",defaultValue:m,style:{width:300}},"date")],children:[a&&s.jsxs("div",{style:{textAlign:"center",padding:40},children:[s.jsx(w,{size:"large"}),s.jsx("div",{style:{marginTop:16},children:"分时数据加载中..."})]}),!a&&!e&&s.jsx(L,{message:"暂无数据",description:"请选择股票查看资产负债表数据",type:"info",showIcon:!0}),!a&&e&&s.jsxs(s.Fragment,{children:[s.jsxs(g,{gutter:16,style:{marginBottom:24},children:[s.jsx(n,{span:6,children:s.jsx(l,{children:s.jsx(p,{title:"总资产",value:e.totalAssets,precision:2,formatter:t=>`¥${(Number(t)/1e8).toFixed(2)}亿`})})}),s.jsx(n,{span:6,children:s.jsx(l,{children:s.jsx(p,{title:"总负债",value:e.totalLiabilities,precision:2,formatter:t=>`¥${(Number(t)/1e8).toFixed(2)}亿`})})}),s.jsx(n,{span:6,children:s.jsx(l,{children:s.jsx(p,{title:"净资产",value:e.totalEquity,precision:2,formatter:t=>`¥${(Number(t)/1e8).toFixed(2)}亿`})})}),s.jsx(n,{span:6,children:s.jsx(l,{children:s.jsx(p,{title:"资产负债率",value:e.totalAssets?e.totalLiabilities/e.totalAssets*100:0,precision:2,suffix:"%",valueStyle:{color:e.totalLiabilities/e.totalAssets>.7?"#cf1322":"#3f8600"}})})})]}),s.jsxs(g,{gutter:16,style:{marginBottom:24},children:[s.jsx(n,{span:12,children:s.jsx(l,{title:"资产结构分析",children:s.jsx(Y,{...S})})}),s.jsx(n,{span:12,children:s.jsx(l,{title:"资产负债率趋势",children:s.jsx(P,{...F})})})]}),s.jsx(l,{title:"历史数据",children:s.jsx(B,{columns:C,dataSource:d,rowKey:"id",pagination:!1,size:"middle",loading:a})})]})]})},ce=R(z);export{ce as default};
